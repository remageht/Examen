В C++ переменные в куче (heap) создаются с помощью оператора new. Куча — это область памяти, которая используется для динамического выделения памяти. В отличие от стека, память в куче не освобождается автоматически, и её необходимо явно удалять с помощью оператора delete.
________________________________________________________________________________
### Как создать переменную в куче?
Чтобы создать переменную в куче, используйте оператор new. Этот оператор выделяет память в куче и возвращает указатель на эту память.
________________________________________________________________________________
### Пример создания переменной в куче
#### 1.Создание простого типа:

```
int* ptr = new int(42);  // Выделение памяти для int и инициализация значением 42
std::cout << *ptr << std::endl;  // Вывод: 42
delete ptr;  // Освобождение памяти
ptr = nullptr;  // Обнуление указателя
```
#### 2.Создание массива:

```
int* arr = new int[5]{1, 2, 3, 4, 5};  // Выделение памяти для массива из 5 элементов
for (int i = 0; i < 5; i++) {
    std::cout << arr[i] << " ";  // Вывод: 1 2 3 4 5
}
delete[] arr;  // Освобождение памяти
arr = nullptr;  // Обнуление указателя
```
#### 3.Создание объекта класса:

```
class MyClass {
public:
    MyClass() { std::cout << "Constructor" << std::endl; }
    ~MyClass() { std::cout << "Destructor" << std::endl; }
};

MyClass* obj = new MyClass();  // Выделение памяти для объекта и вызов конструктора
delete obj;  // Освобождение памяти и вызов деструктора
obj = nullptr;  // Обнуление указателя
```
Вывод:

```
Constructor
Destructor
```
________________________________________________________________________________
### Особенности переменных в куче
#### 1.Ручное управление памятью:

Память в куче выделяется с помощью new и освобождается с помощью delete. Если память не освободить, это приведёт к утечке памяти (memory leak).

#### 2.Большой размер:

Куча может использовать всю доступную оперативную память, в отличие от стека, который имеет ограниченный размер.

#### 3.Медленный доступ:

Доступ к данным в куче медленнее, чем в стеке, так как куча управляется динамически.

#### 4.Глобальная область видимости:

Переменные в куче могут быть доступны из любой части программы, если у вас есть указатель на них.
________________________________________________________________________________
### Когда использовать кучу?
Куча используется для:

Данных, которые должны существовать дольше, чем время жизни функции или блока.

Больших массивов или объектов, которые не помещаются в стеке.

Данных, размер которых неизвестен на этапе компиляции (например, динамические массивы).
________________________________________________________________________________
### Умные указатели для автоматического управления памятью
Чтобы избежать ручного управления памятью и связанных с этим ошибок, в C++ рекомендуется использовать умные указатели из стандартной библиотеки (<memory>):

std::unique_ptr:

Уникальный указатель, который автоматически удаляет объект при выходе из области видимости.

Пример:

```
#include <memory>

std::unique_ptr<int> ptr = std::make_unique<int>(42);
// Память автоматически освободится при выходе из области видимости
```
std::shared_ptr:


Указатель с подсчётом ссылок. Память освобождается, когда последний shared_ptr выходит из области видимости.

Пример:

```
#include <memory>

std::shared_ptr<int> ptr = std::make_shared<int>(42);
// Память освободится, когда все shared_ptr будут уничтожены
```
________________________________________________________________________________
###  Итог
Переменные в куче создаются с помощью оператора new.

Память в куче необходимо явно освобождать с помощью delete (или delete[] для массивов).

Для безопасного управления памятью используйте умные указатели (std::unique_ptr, std::shared_ptr).

Куча подходит для данных с долгим временем жизни или больших объёмов данных.